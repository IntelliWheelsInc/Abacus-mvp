<link href="../../styles/checkout/cart.css" rel="stylesheet"/>

<div class="appBody">
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5BJDWF"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5BJDWF');</script>
  <!-- End Google Tag Manager -->

  <div class="cartBody" ng-class="{'appBodyOverflow': imageDisplay1 >= 0 }">

    <div data-ng-if="wheelchairs.length === 0">
      <img class="add-icon" data-ng-src="images/my_design_page/cart_empty.png">
      <span class="medium">Your cart is currently empty</span>
    </div>
    <ul class="media-list" ng-if="wheelchairs.length" style="max-width: 500px;">
      <li ng-repeat="w in wheelchairs" class="media" style="overflow: visible;">
        <!-- Shows Wheelchair Image in canvas on left -->
        <div class="pull-left">
          <div class="media-object">
            <canvas my-canvas img_arr={{w.getPreviewImages(3)}} ng-mouseover="editPanelShow = true"
                ng-mouseleave="editPanelShow = false"
                ng-click="toggleImageDisplay($index)"
                width="{{WHEELCHAIR_CANVAS_WIDTH}}">
            </canvas>
          </div>
        </div>
        <!-- All content related to wheelchair -->
        <div class="media-body" style="overflow: visible;">
          <div>
            <input placeholder="Wheelchair Name" data-ng-if="edit !== true" class="wheelchair_name_input" ng-model="w.title" ng-value="w.title">
            </input>
            <img class="trash_icon"
              data-ng-src="images/my_design_page/delete.png"
              width="20"
              ng-click="deleteWheelchair($index)">
          </div>
          <!-- Buttons that edit the wheelchair -->
          <ul style="list-style-type: none; padding:0; margin:0;">
            <li ng-click="editWheelchair($index)"><a>Edit</a></li>
            <li ng-click="moveToWishlist($index)"><a>Move to Wishlist</a></li>
            <li ng-click="duplicateWheelchair($index)"><a>Duplicate</a></li>
          </ul>
          <br>
          <!-- Dropdown -->
          <div>
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                More info on... <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li>
                  <a ng-click="wheelchairUIOpts[$index].showParts = !wheelchairUIOpts[$index].showParts">Parts</a></li>
                <li>
                  <a ng-click="wheelchairUIOpts[$index].showMeasurements = !wheelchairUIOpts[$index].showMeasurements">Measurements</a>
                </li>
              </ul>
            </div>
            <h4 style="float: right;">${{w.getTotalPrice()}}</h4>
          </div>
          <br>

          <!-- Tables showing Part & Measurement configurations -->
          <div style="padding: {{WHEELCHAIR_CANVAS_WIDTH}};">
            <!-- Parts Table...only shown if toggled -->
            <h3 ng-if="wheelchairUIOpts[$index].showParts">Parts</h3>
            <table ng-if="wheelchairUIOpts[$index].showParts">
              <tr class="part-row" ng-repeat="part in parts">
                <td class="title-column">
                  <p data-ng-bind="part.getName()"></p>
                </td>
                <td class="value-column">
                  <p data-ng-bind="getPartOption(w, part)"></p>
                </td>
              </tr>
            </table>
            <br>

            <!-- Measurements Table...only shown if toggled -->
            <h3 ng-if="wheelchairUIOpts[$index].showMeasurements">Measurements</h3>
            <table ng-if="wheelchairUIOpts[$index].showMeasurements">
              <tr class="part-row" ng-repeat="measure in getWheelchairMeasures(w)">
                <td class="title-column">
                  <p data-ng-bind="measure.getName()"></p>
                </td>
                <td class="value-column">
                  <p data-ng-bind="getMeasureDetails(w, measure).optionString"></p>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </li>
    </ul>

  </div>




  <!-- Shows wheelchair on Modal Dialog if small canvas is clicked -->
  <div ng-repeat="w in wheelchairs" ng-if="imageDisplay1 == $index" id="displayImage">
    <div id="offClickArea" ng-show="imageDisplay1 >= 0" data-ng-click="toggleImageDisplay(-1)"></div>
    <div class="mainDisplay">
      <div id="designTitle"><h3 data-ng-bind="w.getTitle()"></h3></div>
      <img class="leftButton" src="images/icons/left_button.svg" alt="Previous" width="30" height="30"
           ng-show="wheelchairs.length > 1"
           data-ng-click="rotate(-1)"/>
      <img class="rightButton" src="images/icons/right_button.svg" alt="Next" width="30" height="30"
           ng-show="wheelchairs.length > 1"
           data-ng-click="rotate(1)"/>
      <canvas my-canvas img_arr="{{w.getPreviewImages(3)}}"
              width="518" height="400"></canvas>
    </div>
  </div>

</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64294275-1', 'auto');
  ga('send', 'pageview');

</script>
