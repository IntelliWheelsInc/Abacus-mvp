<link href="../../styles/checkout/invoice.css" rel="stylesheet"/>
<script src='../../scripts/canvas/imageStacker.js'></script>
<span id="pdf-wrapper">
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5BJDWF"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5BJDWF');</script>
<!-- End Google Tag Manager -->
  <div id="invoice-body" ng-repeat="wheelchair in wheelchairs">

    <!-- FIRST PAGE -->
    <div class="page">
      <div class="wrapper">
        <div class="details">
          <h2 id="page-title" ng-bind-html="wheelchair.getTitle()"></h2>
          <table>
            <tr>
              <td class="invoice-label">Name:</td>
              <td class="value" ng-bind-html="name"></td>
            </tr>
            <tr>
              <td class="invoice-label">Manufacturer:</td>
              <td class="value" ng-bind-html="getManufacturer(wheelchair)"></td>
            </tr>
            <tr>
              <td class="invoice-label">Price:</td>
              <td class="value" ng-bind-html="getBasePrice(wheelchair)"></td>
            </tr>
            <tr>
              <td class="invoice-label">Model:</td>
              <td class="value" ng-bind-html="getModel(wheelchair)"></td>
            </tr>
            <tr>
              <td class="invoice-label">Weight:</td>
              <td class="value" ng-bind-html="getBaseWeight(wheelchair)"></td>
            </tr>
            <tr>
              <td class="invoice-label">Order Number:</td>
              <td class="value" ng-bind-html="orderNum"></td>
            </tr>
          </table>
        </div>
        <div class="images">
          <canvas my-canvas val="0" index="{{$index}}" class="first-image" width="264" height="201.313"></canvas>
          <canvas my-canvas val="1" index="{{$index}}" class="second-image" width="264" height="201.313"></canvas>
          <canvas my-canvas val="2" index="{{$index}}" class="third-image" width="264" height="201.313"></canvas>

          <!--<img class="front-page-disp first-image"-->
          <!--ng-repeat="img in topImageSets[$index]"-->
          <!--ng-src="{{img.URL}}"-->
          <!--ng-style="{'z-index': $index }"/>-->
          <!--<img class="front-page-disp second-image"-->
          <!--ng-repeat="img in midImageSets[$index]"-->
          <!--ng-src="{{img.URL}}"-->
          <!--ng-style="{'z-index': $index }"/>-->
          <!--<img class="front-page-disp third-image"-->
          <!--ng-repeat="img in botImageSets[$index]"-->
          <!--ng-src="{{img.URL}}"-->
          <!--ng-style="{'z-index': $index }"/>-->
        </div>
      </div>
      <span class="footer">Powered by</span>
    </div>

    <!-- PART DESCRIPTION PAGE -->
    <div class="page">
      <div class="wrapper">
        <div class="top_text">
          <table class="desc_table dark_line">
            <tr>
              <td>
                <p class="type">
                  Type
                </p>
              </td>
              <td>
                <p class="details">
                  Details
                </p>
              </td>
              <td>
                <p class="price_text">
                  Price
                </p>
              </td>
            </tr>
          </table>
          <table class="desc_table dark_line">
            <tr>
              <td class="wheel-image">
                <table class="wheel_frame">
                  <tr>
                    <td>
                      <p class="desc_img">
                        Frame
                      </p>
                    </td>
                  </tr>
                  <tr>
                    <td class="image_holder">
                      <canvas my-canvas val="3" index="{{$index}}" class="frame_img"></canvas>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <table>
                  <tbody ng-repeat="part in frameParts[$index]">
                  <tr>
                    <td>
                      <p class="description" data-ng-bind="part.partName"></p>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <p class="description-result" data-ng-bind="part.optionName"></p>
                    </td>
                    <td>
                      <p class="description-result price" data-ng-bind="part.priceString"></p>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </table>
          <table class="desc_table dark_line">
            <tr>
              <td class="wheel-image">
                <table class="wheel_frame wheel_alt">
                  <tr>
                    <td>
                      <p class="desc_img">
                        Wheel
                      </p>
                    </td>
                  </tr>
                  <tr>
                    <td class="image_holder">
                      <canvas my-canvas val="4" index="{{$index}}" class="frame_img_wheel"></canvas>
                    </td>
                  </tr>
                </table>
              </td>
              <td>
                <table class="wheel_selection">
                  <tbody ng-repeat="part in wheelParts[$index]">
                  <tr>
                    <td>
                      <p class="description" data-ng-bind="part.partName"></p>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <p class="description-result" data-ng-bind="part.optionName"></p>
                    </td>
                    <td>
                      <p class="description-result price" data-ng-bind="part.priceString"></p>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </table>
        </div>
        <div class="bottom-text">
        <span class="description left">
          Subtotal
        </span>
        <span class="description-result price">
          $<span data-ng-bind="wheelchair.getTotalPrice().toFixed(2)"></span>
        </span>
        </div>
      </div>
      <span class="footer">Powered by</span>
    </div>

    <!-- MEASUREMENTS PAGE -->
    <div class="page">
      <div class="wrapper">
        <div class="measurements dark_line">
          <h3>Measurements</h3>
        </div>
        <table>
          <tr>
            <td>
              <div class="measure" ng-repeat="measure in measurements[$index]">
                <p class="description" data-ng-bind="measure.name"></p>

                <p class="description-result">
                  <span data-ng-bind="measure.optionString"></span> / <span
                  data-ng-bind="measure.altOptionString"></span>
                </p>
              </div>
            </td>
            <td>
              <img class="wheel_measurement_one" src="../../images/pangding.jpg"/>
            </td>
          </tr>
          <tr>
            <td>
              <img class="wheel_measurement_one" src="../../images/pangding.jpg"/>
            </td>
            <td>
              <img class="wheel_measurement_one" src="../../images/pangding.jpg"/>
            </td>
          </tr>
        </table>
      </div>
      <span class="footer">Powered by</span>
    </div>
  </div>

  <!-- INTELLIWHEELS INFO PAGE -->
  <div id="page" class="page">
    <div class="wrapper2">
      <div id="intelliwheels-info">
        <img id="logo" src="../../images/tiarrow_logo.png"/>

        <div id="address">
          <p>60 Hazelwood Dr.</p>

          <p>Suite 110</p>

          <p>Champaign, IL, 61820</p>
        </div>
        <div id="contact">
          <p>Phone: (217)903-4563</p>

          <p>Fax: (217)332-1560</p>

          <p>www.intelliwheels.net</p>
        </div>
      </div>
      <div id="summary">
        <h3 id="sum-head">SUMMARY</h3>
        <table>
          <tr>
            <td class="invoice-label"><p>Purchase Date:</p></td>
            <td class="value2"><p ng-bind-html="date"></p></td>
          </tr>
          <tr>
            <td class="invoice-label"><p>Terms:</p></td>
            <td class="value2"><p>Net 30</p></td>
          </tr>
          <tr>
            <td class="invoice-label"><p>Ship Via:</p></td>
            <td class="value2"><p>Best</p></td>
          </tr>
          <tr>
            <td>
              <div class="address">
                <h6>BILL TO:</h6>

                <p ng-bind-html="name"></p>

                <p ng-bind-html="address"></p>
              </div>
            </td>
            <td class="value2">
              <div class="address">
                <h6>SHIP TO:</h6>

                <p ng-bind-html="name"></p>

                <p ng-bind-html="address"></p>
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div id="wheelchair-sum">
        <table>
          <tr class="header">
            <td class="qty"><p>Qty</p></td>
            <td><p>Details</p></td>
            <td><p class="price">Price</p></td>
          </tr>
          <tr ng-repeat="wheelchair in wheelchairs">
            <td class="qty"><p>1</p></td>
            <td><p data-ng-bind="wheelchair.getTitle()"></p></td>
            <td><p class="price" data-ng-bind="wheelchair.getTotalPrice().toFixed(2)"></p></td>
          </tr>
        </table>
      </div>
      <div id="final-sum">
      </div>
      <div class="left">
        <p>Sales tax rate:</p>

        <p ng-bind-html="taxrate+'%'"></p>
      </div>
      <table class="dark_line final-sum-table">
        <tr>
          <td><p class="price-bold">Subtotal</p></td>
          <td><p class="price" ng-bind-html="'$'+subtotal"></p></td>
        </tr>
        <tr>
          <td><p class="price-bold">Shipping</p></td>
          <td><p class="price" ng-bind-html="'$'+shipping"></p></td>
        </tr>
        <tr>
          <td><p class="price-bold">Tax</p></td>
          <td><p class="price" ng-bind-html="'$'+tax"></p></td>
        </tr>
        <tr>
          <td><p class="price-bold">Discount</p></td>
          <td><p class="price">$23</p></td>
        </tr>
      </table>
      <table class="final-sum-table">
        <tr>
          <td>
            <p class="price-bold">Total</p>
          </td>
          <td>
            <p class="price" ng-bind-html="'$'+total"></p>
          </td>
        </tr>
      </table>
    </div>
  </div>
</span>
<script>
  require_baseUrl_override = '../../scripts/jsPDF';
  require(['../../scripts/jsPDF/libs/require/config'], function () {
    require(['html2pdf'], function () {

      var pdf = new jsPDF('p', 'pt', 'letter');
      var canvas = pdf.canvas;
      canvas.height = 72 * 11;
      canvas.width = 72 * 8.5;
      // var width = 400;
      html2pdf(document.getElementById("appContainer"), pdf, function (canvas) {
          pdf.save('invoice.pdf');
        }
      );
    }); // require
  }); // require
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64294275-1', 'auto');
  ga('send', 'pageview');

</script>
